jQuery(function(e){const n=e("#mlcm-generate-menu"),t=e("#mlcm-delete-cache"),s=n.next(".spinner"),a=e("#mlcm-generation-status");function o(e,n){n=n||5e3,setTimeout(()=>{e.fadeOut("fast",function(){e.html(""),e.show()})},n)}n.length&&n.on("click",function(t){t.preventDefault(),s.addClass("is-active"),n.prop("disabled",!0),a.html('<div class="notice notice-info"><p>'+mlcmAdmin.i18n.generating+"</p></div>"),e.ajax({url:mlcmAdmin.ajax_url,method:"POST",data:{action:"mlcm_generate_menu",security:mlcmAdmin.nonce},success:function(t){s.removeClass("is-active"),n.prop("disabled",!1);const i=t.data||t,d=!0===t.success||i&&i.success===!0;if(d){const e=i&&i.message?i.message:mlcmAdmin.i18n.menu_generated;a.html('<div class="notice notice-success is-dismissible"><p>'+e+"</p></div>"),o(a,5e3)}else{const e=i&&i.message?i.message:mlcmAdmin.i18n.error;a.html('<div class="notice notice-error is-dismissible"><p>'+e+"</p></div>"),o(a,8e3)}},error:function(t,i,d){s.removeClass("is-active"),n.prop("disabled",!1);const c=t.responseJSON&&t.responseJSON.data&&t.responseJSON.data.message?t.responseJSON.data.message:mlcmAdmin.i18n.error+": "+d;a.html('<div class="notice notice-error is-dismissible"><p>'+c+"</p></div>"),o(a,8e3)}})}),t.length&&t.on("click",function(n){if(n.preventDefault(),!confirm(mlcmAdmin.i18n.confirm_delete))return;const s=t.next(".spinner");s.addClass("is-active"),t.prop("disabled",!0),a.html('<div class="notice notice-info"><p>'+mlcmAdmin.i18n.deleting+"</p></div>"),e.ajax({url:mlcmAdmin.ajax_url,method:"POST",data:{action:"mlcm_delete_cache",security:mlcmAdmin.nonce},success:function(n){s.removeClass("is-active"),t.prop("disabled",!1);const i=n.data||n,d=!0===n.success||i&&i.success===!0;if(d){const e=i&&i.message?i.message:mlcmAdmin.i18n.cache_deleted;a.html('<div class="notice notice-success is-dismissible"><p>'+e+"</p></div>"),o(a,5e3)}else{const e=i&&i.message?i.message:mlcmAdmin.i18n.delete_error;a.html('<div class="notice notice-error is-dismissible"><p>'+e+"</p></div>"),o(a,8e3)}},error:function(n,s,i){s.removeClass("is-active"),t.prop("disabled",!1);const d=n.responseJSON&&n.responseJSON.data&&n.responseJSON.data.message?n.responseJSON.data.message:mlcmAdmin.i18n.delete_error+": "+i;a.html('<div class="notice notice-error is-dismissible"><p>'+d+"</p></div>"),o(a,8e3)}})}),e(document).on("click",".notice-dismiss",function(){e(this).closest(".notice").fadeOut("fast")})});

